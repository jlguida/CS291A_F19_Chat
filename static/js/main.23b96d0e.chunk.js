(this.webpackJsonpchat_client=this.webpackJsonpchat_client||[]).push([[0],{30:function(e,n,t){},51:function(e,n,t){e.exports=t(92)},56:function(e,n,t){},77:function(e,n){},79:function(e,n){},92:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),i=t(43),s=t.n(i),r=(t(56),t(30),t(28)),c=t(8),d=t(9),u=t(11),l=t(10),h=t(12),m=t(5),g=t(7),p=t(6),f=t(13),w=t(48);function v(){var e=Object(m.a)(["\n    display: flex;\n    flex-direction: row;\n"]);return v=function(){return e},e}function b(){var e=Object(m.a)(["\n    border-bottom: ",";\n    font-size: ",";\n    color: ",";\n"]);return b=function(){return e},e}function O(){var e=Object(m.a)(["\n    background: ",";\n    border-radius: ",";\n    padding: 10px;\n    box-shadow: 0px 3px 10px rgba(0,0,0,0.9);\n"]);return O=function(){return e},e}var E=function(e){function n(e){var t;return Object(c.a)(this,n),(t=Object(u.a)(this,Object(l.a)(n).call(this,e))).state={width:0,height:0,message:"test"},t.updateWindowDimensions=t.updateWindowDimensions.bind(Object(g.a)(t)),t.handleMessageChange=t.handleMessageChange.bind(Object(g.a)(t)),t.sendMessage=t.sendMessage.bind(Object(g.a)(t)),t}return Object(h.a)(n,e),Object(d.a)(n,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"handleMessageChange",value:function(e){this.setState({message:e.target.value})}},{key:"sendMessage",value:function(){this.props.send(this.state.message)}},{key:"render",value:function(){return o.a.createElement(j,{style:{height:70}},o.a.createElement(x,null),o.a.createElement(y,null,o.a.createElement(f.a,{style:{width:this.state.width,paddingRight:5}},o.a.createElement(f.a.Control,{onChange:this.handleMessageChange,placeholder:"Type message"})),o.a.createElement(w.a,{onClick:this.sendMessage},"send")))}}]),n}(o.a.Component),j=p.a.div(O(),"#121212","8px"),x=p.a.h1(b(),"2px solid #386bc2","20px","#FFFFFF"),y=p.a.div(v());function W(){var e=Object(m.a)(["\n    color: ",";\n    font-size: ",';\n    height: "100%";\n']);return W=function(){return e},e}function S(){var e=Object(m.a)(["\n    border-bottom: ",";\n    font-size: ",";\n    color: ",";\n    padding: ",';\n    height: "100%";\n']);return S=function(){return e},e}function D(){var e=Object(m.a)(["\n    background: ",";\n    border-radius: ",";\n    padding: ",';\n    height: "100%";\n    box-shadow: 0px 3px 10px rgba(0,0,0,0.9);\n    overflow-y: auto;\n']);return D=function(){return e},e}var k=function(e){function n(e){var t;return Object(c.a)(this,n),(t=Object(u.a)(this,Object(l.a)(n).call(this,e))).state={width:0,height:0},t.updateWindowDimensions=t.updateWindowDimensions.bind(Object(g.a)(t)),t}return Object(h.a)(n,e),Object(d.a)(n,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"render",value:function(){var e=this.props.users,n=(void 0===e?["No one else is logged in yet"]:e).map((function(e){return o.a.createElement(C,null,e)}));return o.a.createElement(L,{style:{height:.7*this.state.height,width:.2*this.state.width}},o.a.createElement(F,null,"Active Users"),n)}}]),n}(o.a.Component),L=p.a.div(D(),"#121212","8px","15px"),F=p.a.h1(S(),"2px solid #386bc2","20px","#FFFFFF","15px"),C=p.a.p(W(),"#dbdbdb","15px");function N(){var e=Object(m.a)(["\n    border-bottom: ",";\n    font-size: ",";\n    color: ",";\n    padding: ",";\n"]);return N=function(){return e},e}function U(){var e=Object(m.a)(["\n    background: ",";\n    border-radius: ",";\n    padding: ",";\n    box-shadow: 0px 3px 10px rgba(0,0,0,0.9);\n"]);return U=function(){return e},e}var z=function(e){function n(e){var t;return Object(c.a)(this,n),(t=Object(u.a)(this,Object(l.a)(n).call(this,e))).state={userName:"enter username",passWord:"enter password",url:"enter url",width:0,height:0,showLogin:1},t.handleLogin=t.handleLogin.bind(Object(g.a)(t)),t.handleUsernameChange=t.handleUsernameChange.bind(Object(g.a)(t)),t.handlePasswordChange=t.handlePasswordChange.bind(Object(g.a)(t)),t.handleURLChange=t.handleURLChange.bind(Object(g.a)(t)),t.updateWindowDimensions=t.updateWindowDimensions.bind(Object(g.a)(t)),t}return Object(h.a)(n,e),Object(d.a)(n,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"handleLogin",value:function(){this.props.loginHandler(this.state.url,this.state.userName,this.state.passWord)}},{key:"handleUsernameChange",value:function(e){this.setState({userName:e.target.value})}},{key:"handlePasswordChange",value:function(e){this.setState({passWord:e.target.value})}},{key:"handleURLChange",value:function(e){this.setState({url:e.target.value})}},{key:"render",value:function(){return o.a.createElement("div",{style:{width:window.innerWidth,height:window.innerHeight}},o.a.createElement(M,{style:{width:.5*window.innerWidth,position:"absolute",bottom:.4*window.innerHeight,left:.2*window.innerWidth}},o.a.createElement(T,null,"Login"),o.a.createElement(f.a,null,o.a.createElement(f.a.Group,{controlId:"formBasicEmail"},o.a.createElement(f.a.Label,{className:"login-form"},"Chat URL"),o.a.createElement(f.a.Control,{onChange:this.handleURLChange,placeholder:this.state.url})),o.a.createElement(f.a.Group,{controlId:"formBasicEmail"},o.a.createElement(f.a.Label,{className:"login-form"}," Username "),o.a.createElement(f.a.Control,{onChange:this.handleUsernameChange,placeholder:this.state.userName})),o.a.createElement(f.a.Group,{controlId:"formBasicPassword"},o.a.createElement(f.a.Label,{className:"login-form"},"Password"),o.a.createElement(f.a.Control,{onChange:this.handlePasswordChange,type:"password",placeholder:this.state.passWord})),o.a.createElement("button",{onClick:this.handleLogin,type:"button",class:"btn btn-outline-primary"},"Submit"))))}}]),n}(o.a.Component),M=p.a.div(U(),"#121212","8px","15px"),T=p.a.h1(N(),"2px solid #386bc2","20px","#FFFFFF","15px");function H(){var e=Object(m.a)(["\n    color: ",";\n    font-size: ",';\n    height: "100%";\n']);return H=function(){return e},e}function I(){var e=Object(m.a)(["\n    border-bottom: ",";\n    font-size: ",";\n    color: ",";\n    padding: ",";\n"]);return I=function(){return e},e}function P(){var e=Object(m.a)(["\n    background: ",";\n    border-radius: ",";\n    padding: ",";\n    box-shadow: 0px 3px 7px rgba(0,0,0,0.9);\n    overflow-y: auto;\n"]);return P=function(){return e},e}var J=function(e){function n(e){var t;return Object(c.a)(this,n),(t=Object(u.a)(this,Object(l.a)(n).call(this,e))).scrollToBottom=function(){t.messagesEnd.scrollIntoView({behavior:"smooth"})},t.state={width:0,height:0},t.updateWindowDimensions=t.updateWindowDimensions.bind(Object(g.a)(t)),t}return Object(h.a)(n,e),Object(d.a)(n,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions),this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"render",value:function(){var e=this,n=this.props.messages,t=(void 0===n?["No messages to display yet"]:n).map((function(e){return o.a.createElement(G,null,e)}));return o.a.createElement(R,{style:{height:.7*this.state.height,width:.73*this.state.width}},o.a.createElement(B,null,"Beginning of Messages"),t,o.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(n){e.messagesEnd=n}}))}}]),n}(o.a.Component),R=p.a.div(P(),"#121212","8px","15px"),B=p.a.h1(I(),"2px solid #386bc2","20px","#FFFFFF","15px"),G=p.a.p(H(),"#dbdbdb","15px");function A(){var e=Object(m.a)(["\n    border-left: ",";\n    font-size: ",";\n    color: ",";\n    padding-left: 10px;\n"]);return A=function(){return e},e}function _(){var e=Object(m.a)(["\n    border-left: ",";\n    font-size: ",";\n    color: ",";\n    padding-left: 10px;\n"]);return _=function(){return e},e}function q(){var e=Object(m.a)(["\n    display: flex;\n    flex-direction: row;\n"]);return q=function(){return e},e}function X(){var e=Object(m.a)(["\n    padding-left: 10px;\n    font-size: ",";\n    color: ",";\n    &:hover {\n        cursor: pointer;\n    };\n"]);return X=function(){return e},e}var V=function(e){function n(e){var t;return Object(c.a)(this,n),(t=Object(u.a)(this,Object(l.a)(n).call(this,e))).state={width:0,height:0},t.updateWindowDimensions=t.updateWindowDimensions.bind(Object(g.a)(t)),t}return Object(h.a)(n,e),Object(d.a)(n,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"render",value:function(){var e=this.props,n=e.user,t=e.status,a=e.logout,i=e.login,s=e.action;return o.a.createElement(K,null,"you are logged in"===t?o.a.createElement(Q,null,"Hello, ",n," ",t):o.a.createElement(Y,null,"Hello, ",t),o.a.createElement($,{onClick:"Log in"===s?i:a},s))}}]),n}(o.a.Component),$=p.a.h1(X(),"30px","2px solid #13cf48"),K=p.a.div(q()),Q=p.a.h1(_(),"2px solid #13cf48","30px","#FFFFFF"),Y=p.a.h1(A(),"2px solid #cf1515","30px","#FFFFFF");function Z(){var e=Object(m.a)(["\n    color: ",";\n    font-size: ",";\n    padding: ",";\n"]);return Z=function(){return e},e}function ee(){var e=Object(m.a)(["\n    color: ",";\n    font-size: ",";\n    padding: ",";\n    font-style: italic;\n"]);return ee=function(){return e},e}function ne(){var e=Object(m.a)(["\n    border-left: ",";\n    font-size: ",";\n    color: ",";\n    padding: ",";\n    font-weight: bold;\n"]);return ne=function(){return e},e}function te(){var e=Object(m.a)(["\n    display: flex;\n    flex-direction: row;\n"]);return te=function(){return e},e}var ae=function(e){function n(e){var t;return Object(c.a)(this,n),(t=Object(u.a)(this,Object(l.a)(n).call(this,e))).state={width:0,height:0},t.updateWindowDimensions=t.updateWindowDimensions.bind(Object(g.a)(t)),t}return Object(h.a)(n,e),Object(d.a)(n,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"date_format",value:function(e){var n=new Date(1e3*e);return n.toLocaleDateString("en-US")+" "+n.toLocaleTimeString("en-US")}},{key:"render",value:function(){var e=this.props,n=e.time,t=void 0===n?0:n,a=e.user,i=void 0===a?0:a,s=e.text,r=void 0===s?0:s;return o.a.createElement(oe,null,o.a.createElement(ie,null," ",i," "),o.a.createElement(se,null," ",this.date_format(t)," "),o.a.createElement(re,null," ",r," "))}}]),n}(o.a.Component),oe=p.a.div(te()),ie=p.a.p(ne(),"2px solid #386bc2","15px","#FFFFFF","15px"),se=p.a.p(ee(),"#dbdbdb","15px","15px"),re=p.a.p(Z(),"#dbdbdb","15px","15px"),ce=t(62),de=null,ue=function(e){function n(e){var t;return Object(c.a)(this,n),(t=Object(u.a)(this,Object(l.a)(n).call(this,e))).state={showLogin:!0,loggedInStatus:"you are not logged in.",user:"Jake",action:"Log in",messages:[],users:[]},t}return Object(h.a)(n,e),Object(d.a)(n,[{key:"render",value:function(){var e=this,n=function(){console.log("disconnect"),e.setState({loggedInStatus:"you are not logged in",users:[],action:"Log in",messages:[]})},t=function(){e.setState({showLogin:!0})},a=function(n){console.log("OUTPUT: ",n),e.setState({messages:[].concat(Object(r.a)(e.state.messages),[o.a.createElement(ae,{user:n.user,time:n.created,text:n.message})])})},i=function(n){console.log("Displaying",n),e.setState({users:n})},s=function(){console.log("CALLING OPEN STREAM"),de=new ce(sessionStorage.url+"/stream/"+sessionStorage.accessToken),e.setState({showLogin:!1}),de.addEventListener("Disconnect",(function(e){var a=JSON.parse(e.data);console.log("Disconnect: ",a),de.close(),n(),delete sessionStorage.accessToken,t()})),de.addEventListener("Join",(function(n){var t,o;try{t=JSON.parse(n.data),console.log("Join: ",t),console.log("HNNG: ",this.state),o=t.user,i([].concat(Object(r.a)(e.state.users),[o])),a({user:t.user,time:t.created,message:"JOINED"})}catch(s){console.log("Too bad so sad",s)}})),de.addEventListener("Message",(function(e){var n=JSON.parse(e.data);console.log("Message: ",n),a(n)})),de.addEventListener("Server Status",(function(e){var n=JSON.parse(e.data);console.log("SS: ",n);var t={user:"Server Status",time:n.created,text:n.status};a(t)})),de.addEventListener("Users",(function(n){var t;console.log("WHATS UP:");try{t=JSON.parse(n.data),console.log("Users: ",t.users),console.log("CONNECTING"),e.setState({loggedInStatus:"you are logged in",user:sessionStorage.username,action:"Log out"}),i(t.users)}catch(a){console.log("Too bad so sad.")}})),de.addEventListener("Part",(function(n){var t=JSON.parse(n.data);console.log("Part: ",t),function(n){var t=e.state.users.filter((function(e,t,a){return e!=n}));i(t)}(t.user),a({user:t.user,time:t.created,message:"PART"})})),de.addEventListener("error",(function(e){console.log("Oh well",e)}))};return o.a.createElement("div",{className:"App"},this.state.showLogin&&o.a.createElement("div",{className:"Login"},o.a.createElement(z,{loginHandler:function(e,n,t){console.log("Succesful Login"+e+n+t);var a=new XMLHttpRequest,o=new FormData;o.append("password",t),o.append("username",n),sessionStorage.url=e,sessionStorage.username=n,console.log("URL:"+sessionStorage.url),a.open("POST",sessionStorage.url+"/login"),a.onreadystatechange=function(){4==this.readyState&&(201===this.status?(t="",n="",e="",sessionStorage.accessToken=JSON.parse(this.responseText).token,s()):403===this.status?alert("Invalid username or password"):alert(this.status+"failure to /login"))},a.send(o)}})),o.a.createElement("div",{className:"Greeting"},o.a.createElement(V,{user:this.state.user,status:this.state.loggedInStatus,logout:n,login:t,action:this.state.action})),o.a.createElement("div",{className:"Messages"},o.a.createElement(J,{messages:this.state.messages})),o.a.createElement("div",{className:"Users"},o.a.createElement(k,{users:this.state.users})),o.a.createElement("div",{className:"Input"},o.a.createElement(E,{send:function(e){if(console.log("SENDING: ",e),void 0!==sessionStorage.accessToken&&""!==e.value){var n=new FormData;n.append("message",e);var t=new XMLHttpRequest;t.open("POST",sessionStorage.url+"/message"),t.setRequestHeader("Authorization","Bearer "+sessionStorage.accessToken),t.send(n)}}})))}}]),n}(o.a.Component);t(91);var le=function(){return o.a.createElement(ue,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(le,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[51,1,2]]]);
//# sourceMappingURL=main.23b96d0e.chunk.js.map